import{J as _}from"./JsToCode-a203d2e7.js";import{_ as b,p as h,r,o as i,c as s,a,F as u,d as g,b as d,e as w,w as V,t as v,l as T}from"./index-fd4f27f0.js";const m=new _,S={name:"TestActions",extends:h.CrudComponent,inject:["store"],data(){return window.TW=this,{aSelected:null,actionLayout:"simple",actionsConf:{"Action Singola":this.actionSingola(),"Action default e Ridefinita":this.actionDefaultDoppia(),"Action custom":this.actionCustom()},fIndex:0,dynamicCode:"",defaultCode:"",reload:!1,editor:null,editorDefault:null,widgetType:""}},mounted(){let t=this;setTimeout(function(){m.loadVisLib(function(){console.debug("OK",document.getElementById("example")),t.editor=ace.edit("example",{theme:"ace/theme/textmate",mode:"ace/mode/javascript",value:"var conf = {}"})})},200)},watch:{aSelected(){let t=this,e=this.actionsConf[t.aSelected];for(let n in e.actions){let c=Object.assign({},e.actions[n]?e.actions[n]:{});e.actions[n]=h.CrudCore.getActionConf(n,c)}console.debug("action conf",t.aSelected,e),this.dynamicCode=m.getSourceCode(e),this.editor&&this.editor.setValue("var conf = "+this.dynamicCode)}},methods:{actionSingola(){return{actions:{"action-save":{text:"ok"}}}},actionDefaultDoppia(){return{actions:{"action-save":null,"action-save2":{actionParent:"action-save",text:"Save 2"}}}},actionCustom(){return{actions:{"action-mia":{text:"Mia",execute(){alert("mia")}},"action-save2":{actionParent:"action-save",text:"Save 2"}}}},updateCode(){let t=this,e=t.editor.getValue(),n=m.updateCode(e);t.reload=!0,setTimeout(function(){try{t.actionsConf[t.aSelected]=window[n](),t.reload=!1}catch(c){throw t.errorDialog(c),c}},20)},wChipConf(){return{type:"w-chip",name:"field1",value:["testone"],change(){console.log("chip value",this.getValue())}}},wHiddenConf(){return{type:"w-hidden",name:"field1",value:"testone"}},wTextConf(){return{type:"w-text",name:"field1",value:"testone"}},wInputConf(){return{inputType:"text",value:"220",change(t){let e=this;console.log("value",e.getValue(),"that",e,"event",t)}}},wSelectConf(){return{value:20,name:"field1",type:"w-select",domainValues:{10:"Dieci",20:"Venti",30:"Trenta"},change(){console.log("value",this.value)}}},wAutocompleteConf(){return{type:"w-autocomplete",name:"email",labelFields:["email"],value:2,foormName:"user",viewType:"edit",referredData:{id:2,email:"ciullo@gmail.com",name:"Pier Paolo Ciullo"},clearButton:!0,extraBind:{"option-label":"name"}}},wCheckboxConf(){return{type:"w-checkbox",value:["1","4"],domainValues:{1:"Uno",2:"Due",3:"Tre",4:"Quattro",5:"Cinque"},change(){console.log(this.value)}}},wRadioConf(){return{type:"w-radio",value:"1",name:"field1",domainValues:{0:"Zero",1:"Uno",2:"Due",3:"Tre"},domainValuesOrder:[3,2,1,0],change(){console.log("change ",this.getValue())}}},wHasmany(t){let e={name:"field1",label:"Hasmany",type:"w-hasmany",hasmanyType:t,hasmanyConf:{fields:["id","nome","descrizione","resource"],defaultWidgetType:"w-input",fieldsConfig:{id:{type:"w-hidden"},nome:{type:"w-input"},resource:{type:"w-input"}}},value:[{id:35,nome:"nome uno",descrizione:"descrizione presente",resource:"de ma de"}],limit:3,change(){console.log("change ",this.getValue())}};return t=="list"&&(e.hasmanyConf.actions=["action-insert","action-delete-selected"]),e},wBelongstoConf(){return{name:"user",type:"w-belongsto",cRef:"wTest",separator:"--",labelFields:["email"],value:{id:3,email:"amministratore@amministratore.it"}}},wCustomConf(){return{type:"w-custom",value:"ciao <b>tutti</b>"}},wColorPickerConf(){return{type:"w-color-picker",value:"#FF00FF"}},wDatePickerConf(){return{value:"2020-12-20",buttonClear:!0,type:"w-date-picker",change(){console.log("date-picker",this.value)}}},wDateTextConf(){return{type:"w-date-text",value:"2021-12-09",displayFormat:"LLL"}},wDateTextConf2(){return{type:"w-date-text",value:"2021-12-18",displayFormat:"giorno DD anno YYYY mese MM"}},wTextareaConf(){return{type:"w-textarea",value:"text area prvoa",change(){console.log("textarea value ",this.getValue())}}},wMultiSelectConf(){return{value:[20,30],name:"field1",type:"w-multi-select",domainValues:{10:"Dieci",20:"Venti",30:"Trenta",40:"Quaranta"},change(){console.log("change ",this.getValue())}}},wSwapConf(){return{type:"w-swap",value:0,name:"banned",onIcon:"fa fa-circle",modelData:{id:4},modelName:"user",routeName:"set",change(){console.log("change ",this.getValue())}}},wStatusConf(){return{value:7,statusType:"icon",type:"w-status",domainValues:{5:"fa fa-times text-red-600",6:"fa fa-gear text-green-600",7:"fa fa-question text-yellow-600"}}},wStatusTextConf(){return{value:5,statusType:"text",type:"w-status",domainValues:{5:"Ciao bello",6:"Prova",7:"Sette"}}},wTexthtmlConf(){return{value:"text area prvoa",type:"w-texthtml",change(){console.log("change",this.getValue())}}},wUploadConf(){return{name:"field1",type:"w-upload",maxFileSize:"2M",extensions:["pdf","xls","png"],modelName:"user",value:{id:"files/allegati/allegato_1_1643619308.pdf",url:"downloadmediable/attachment/1",mimetype:"application/pdf"},ajaxFields:{resource_type:"attachment",field:"name"},methods:{change:function(){console.log("my change",this.getValue())}}}},wUploadAjaxConf(){return{name:"field1",type:"w-upload-ajax",maxFileSize:"2M",extensions:["pdf","xls","png"],modelName:"user",value:{id:"files/allegati/allegato_1_1643619308.pdf",url:"downloadmediable/attachment/1",mimetype:"application/pdf"},ajaxFields:{resource_type:"attachment",field:"name"},methods:{change:function(){console.log("my change",this.getValue())}}}}}},k={class:"grid"},D={class:"col-12"},F={class:"card"},A=["onClick"],B={key:0},j={class:"grid"},z={class:"col-6"};function L(t,e,n,c,o,y){const f=r("Button"),C=r("c-action"),x=r("Fieldset");return i(),s("div",k,[a("div",D,[a("div",F,[e[3]||(e[3]=a("h5",null,"Actions",-1)),a("div",null,[(i(!0),s(u,null,g(o.actionsConf,(p,l)=>(i(),s("a",{key:l,class:"p-button m-1 p-1 p-button-outlined",href:"javascript:void(0)",onClick:P=>o.aSelected=l},v(l),9,A))),128))]),e[4]||(e[4]=a("hr",null,null,-1)),a("div",null,[a("div",null,[["w-hasmany","w-hasmany-list"].indexOf(o.aSelected)>=0?(i(),s("div",B,[d(f,{icon:"fa fa-plus",onClick:t.addHasmany,label:"setValue dall'esterno"},null,8,["onClick"])])):w("",!0),d(x,{legend:"Area Widget"},{default:V(()=>[(i(!0),s(u,null,g(o.actionsConf,(p,l)=>(i(),s(u,{key:l},[o.aSelected==l&&!o.reload?(i(),T(C,{key:0,class:"w-full",ref_for:!0,ref:l,conf:p,layout:o.actionLayout},null,8,["conf","layout"])):w("",!0)],64))),128))]),_:1}),d(f,{class:"p-button w-4 mt-1",label:"Run",onClick:y.updateCode},null,8,["onClick"]),e[2]||(e[2]=a("hr",null,null,-1)),a("div",j,[a("div",z,[a("h6",null,"Configurazione Action "+v(o.widgetType),1),e[0]||(e[0]=a("div",{class:"font-italic"},"Iniziare il codice sempre con var conf = ",-1)),e[1]||(e[1]=a("div",{id:"example",class:"h-20rem w-full"},null,-1))])])])])])])])}const N=b(S,[["render",L],["__scopeId","data-v-06f420ba"]]);export{N as default};
