import{_ as x,r as d,o as n,c as l,b as i,F as f,l as h,d as w,w as _,t as u,m as v,y as b,n as S,x as V}from"./index-a007ac50.js";import{J as T}from"./JsToCode-333922cd.js";const k=b.cView,c=new T,A={name:"TestViews",components:{cView:k},inject:["store"],data(){window.TV=this,console.debug("route params",this.$route.params);let e=this.$route.params&&this.$route.params.case||null;return e&&(e=decodeURI(e)),{wSelected:e,viewsConf:{"lista statica":this.staticList(),"record statico":this.staticRecord(),"user list":this.userList(),"list edit":this.listEdit(),"user view":this.userView(),"user edit":this.userEdit(),"user edit validate js":this.userEditValidate(),"user search":this.userSearch(),"lista con panel":this.userListPanel(),"lista hide column":this.userListHideColumn(),"lista action select":this.userListActionSelect(),"lista con azione doppia":this.userListTwoAction()},viewType:"",reload:!1}},mounted(){let e=this;setTimeout(function(){c.loadVisLib(function(){console.debug("OK",document.getElementById("example")),e.editor=ace.edit("example",{theme:"ace/theme/textmate",mode:"ace/mode/javascript",value:"var conf = {}"}),e.editorDefault=ace.edit("defaultCode",{theme:"ace/theme/textmate",mode:"ace/mode/javascript",value:"var conf = {}"})})},200)},watch:{wSelected(){let e=this,t=this.viewsConf[this.wSelected];this.dynamicCode=c.getSourceCode(t),this.editor&&this.editor.setValue("var conf = "+this.dynamicCode),this.viewType=e.viewsConf[e.wSelected].type;let o=c.getViewDefaultConf(this.viewType);e.defaultCode=c.getSourceCode(o),this.editorDefault&&e.editorDefault.setValue("var conf = "+e.defaultCode)}},methods:{getCodeJs(){let e=this.viewsConf[this.wSelected];return c.getSourceCode(e)},updateCode(){let e=this,t=e.editor.getValue(),o=c.updateCode(t);e.reload=!0,setTimeout(function(){try{e.viewsConf[e.wSelected]=window[o](),e.reload=!1}catch(r){throw e.errorDialog(r),r}},20)},staticList(){return{modelName:"nome_modello",type:"v-list",langContext:null,cRef:"cTest",routeName:null,orderFields:{nome:"nome"},actions:[],viewType:null,metadata:{order:{direction:"ASC",field:"nome"}},pagination:{per_page:2},fieldsConfig:{nome:{type:"w-input"}},value:[{id:1,nome:"aa",cognome:"aa"},{id:2,nome:"bb",cognome:"bb"},{id:3,nome:"dd",cognome:"dd"},{id:4,nome:"ff",cognome:"ff"},{id:5,nome:"mm",cognome:"mm"},{id:6,nome:"nn",cognome:"nn"}]}},staticRecord(){return{type:"v-record",langContext:null,routeName:null,fields:["name","relazione","mycheck"],value:{mycheck:["1"],relazione:"prova",name:"nome"},fieldsConfig:{mycheck:{type:"w-checkbox",domainValues:{0:"bo",1:"uno",2:"due",3:"tre"}}}}},userList(){return{modelName:"user",type:"v-list",actions:["action-view"],orderFields:{email:"email",name:"name"},fieldsConfig:{email:{label:"emailina",type:"w-text",template:{name:"tpl-list",columnClass:"col-12"}}}}},userListPanel(){let e=this.userList();return e.recordActionsPosition="start",e.actions.push("show-panel"),e.actionsConfig={},e.actionsConfig["show-panel"]={text:"sp",type:"record",toggle:!1,execute(t){let o=this;console.log("event",t),this.toggle?this.view.hidePanel():this.view.showPanel(t,{componentName:"c-view",panelClass:"w-7",componentConf:{type:"v-edit",pk:o.modelData.id,modelName:"user",actions:["action-save"]},hide(){console.log("HIIIIII",o.toggle),o.toggle=!1}}),this.toggle=!this.toggle}},e},userView(){return{type:"v-view",modelName:"user",pk:3,fields:["id","email"],layout:{labelPosition:"bottom"}}},userEdit(){return{pk:4,type:"v-edit",fields:["name","email","mainrole"],actions:["action-save","action-back","action-custom"],modelName:"user",mounted(){var e=this;e.waitWidget("email",function(){console.log("wait ok",e.getWidget("email").getValue())})},fieldsConfig:{name:{type:"w-input",rules:"required",required:!0},email:{type:"w-texthtml",template:{name:"tpl-record",labelType:"none"}},pippo:{type:"w-custom",template:"tpl-divider",mounted(){this.value="ciao"}},fotos:{type:"w-hasmany",hasmanyConf:{fields:["nome","descrizione","resource"],fieldsConfig:{resource:{type:"w-upload-ajax",extensions:["jpg","png"],maxFileSize:"2M",ajaxFields:{field:"resource"},modelName:"user"}}},value:[],limit:3},attachments:{type:"w-hasmany",hasmanyConf:{fields:["nome","descrizione","resource"],fieldsConfig:{resource:{type:"w-upload-ajax",extensions:["xls","csv"],maxFileSize:"2M",ajaxFields:{resource_type:"attachment",field:"resource"},modelName:"user"}}},value:[],limit:3},mainrole1:{type:"w-multi-select",value:[1,2],domainValues:{0:"Niente",1:"boh",2:"Due"}},mainrole:{type:"w-select",mounted(){let e=this;setTimeout(function(){console.log("aaa",e.domainValues,e.domainValuesOrder,e.value)},3e3)}},attivo:"w-radio",password:{type:"w-input",inputType:"password"},password_confirmation:{type:"w-input",inputType:"password"}},actionsConfig:{"action-custom":{text:"Custom",execute(){let e=this,t=e.view.getAction("action-save").enabled;return console.log("custom action",e.view.getAction("action-save")),e.view.getAction("action-save").setEnabled(!t),e.messageDialog("azione custom, ora la save Ã¨ "+(t?"DISABILITATA":"ABILITATA")),!0}},"action-save":{afterExecute(){this.alertSuccess("ora tohhhhh")}}}}},userEditValidate(){return{pk:4,type:"v-edit",fields:["name","email","mainrole"],actions:["action-save","action-back","action-custom"],modelName:"user",mounted(){var e=this;e.waitWidget("email",function(){console.log("wait ok",e.getWidget("email").getValue())})},fieldsConfig:{name:{type:"w-input",rules:"required",required:!0},email:{type:"w-input",rules:"required",template:{name:"tpl-record",labelType:"none"}},pippo:{type:"w-custom",template:"tpl-divider",mounted(){this.value="ciao"}},fotos:{type:"w-hasmany",hasmanyConf:{fields:["nome","descrizione","resource"],fieldsConfig:{resource:{type:"w-upload-ajax",extensions:["jpg","png"],maxFileSize:"2M",ajaxFields:{field:"resource"},modelName:"user"}}},value:[],limit:3},attachments:{type:"w-hasmany",hasmanyConf:{fields:["nome","descrizione","resource"],fieldsConfig:{resource:{type:"w-upload-ajax",extensions:["xls","csv"],maxFileSize:"2M",ajaxFields:{resource_type:"attachment",field:"resource"},modelName:"user"}}},value:[],limit:3},mainrole1:{type:"w-multi-select",value:[1,2],rules:"required",domainValues:{0:"Niente",1:"boh",2:"Due"}},mainrole:{type:"w-select",mounted(){let e=this;setTimeout(function(){console.log("aaa",e.domainValues,e.domainValuesOrder,e.value)},3e3)}},attivo:"w-radio",password:{type:"w-input",inputType:"password"},password_confirmation:{type:"w-input",inputType:"password"}},actionsConfig:{"action-custom":{text:"Custom",execute(){let e=this,t=e.view.getAction("action-save").enabled;console.log("custom action",e.view.getAction("action-save")),e.view.getAction("action-save").setEnabled(!t)}}}}},userSearch(){return{modelName:"user",type:"v-search",layout:{cols:4},actions:["action-search","action-search-basic"],actionsConfig:{"action-search":{afterExecute(){console.debug("view search params",this.view.json),this.messageDialog("Ho ricevuto ")}},"action-search-basic":{afterExecute(){console.debug("view search params",this.view.json),this.messageDialog("Ho ricevuto222 ")}}},fields:["user_id","email","stato","stato_check"],advancedFields:["cognome","nome"],fieldsConfig:{stato:{type:"w-multi-select",value:[1],domainValues:{1:"Stato1",2:"Stato2",3:"Stato3",4:"Stato4"},methods:{change(){console.log("Value",this.getValue())}}},stato_check:{type:"w-checkbox",value:[1],domainValues:{1:"Stato1",2:"Stato2",3:"Stato3",4:"Stato4"}}}}},listEdit(){return{modelName:"user",fields:["name","email"],type:"v-list-edit",fieldsConfig:{email:{label:"aaaa"}},fieldsEditConfig:{email:{type:"w-text"}}}},userListHideColumn(){return{modelName:"user",type:"v-list",actions:["action-hide-column","action-show-column"],actionsConfig:{"action-hide-column":{text:"Hide Column",execute(){let e=prompt("inserire nome campo da rimuovere. campi disponibili ( "+this.view.fields.join(",")+")");this.view.hideColumn(e)}},"action-show-column":{text:"Show Column",execute(){let e=this,t=prompt("inserire nome campo da visualizzare. campi disponibili ( "+e.view.hiddenColumns.join(",")+")");e.view.showColumn(t)}}},orderFields:{email:"email",name:"name"},fieldsConfig:{email:{label:"emailina",type:"w-text",template:{name:"tpl-list",columnClass:"col-12"}}}}},userListActionSelect(){return{modelName:"user",type:"v-list",actions:["ActionSelect"],actionsConfig:{ActionSelect:{text:"mod inst",domainValues:{0:"Nessuna azione",1:"Pippo",2:"Pluto"},execute(){alert("value "+this.value)}}},orderFields:{},fieldsConfig:{}}},userListTwoAction(){return{modelName:"user",type:"v-list",actions:["action-view","action-view-1","action-view-2"],fields:["username","email"],actionsConfig:{"action-view-1":{text:"view 1",actionParent:"action-view",beforeExecute(){return alert("prima di execute"),!0}},"action-view-2":{actionParent:"action-view",text:"view 2",afterExecute(){alert("dopo execute")}}},orderFields:{},fieldsConfig:{}}}}},N={class:"grid"},j={class:"col-12"},z={class:"card"},L={class:"w-full"},F=["href"],E={class:"grid overflow-auto"},I={class:"col-12"},D={class:"w-full"},P={class:"grid"},B={class:"col-12"},H={class:"grid"},q={class:"col-6"},M={class:"col-6"},R={key:0,class:"grid mt-5"},J=["innerHTML"];function W(e,t,o,r,s,m){const g=d("c-view"),y=d("Fieldset"),C=d("Button");return n(),l("div",N,[i("div",j,[i("div",z,[t[5]||(t[5]=i("h5",null,"Views",-1)),i("div",L,[(n(!0),l(f,null,h(s.viewsConf,(p,a)=>(n(),l("a",{key:a,class:S(["p-button m-1 p-2",s.wSelected===a?"":"p-button-outlined"]),href:"#/test2-views/"+a},u(a),11,F))),128))]),i("div",E,[i("div",I,[w(y,{class:"",legend:"Area View"},{default:_(()=>[i("div",D,[(n(!0),l(f,null,h(s.viewsConf,(p,a)=>(n(),l("div",{key:a,class:""},[s.wSelected==a&&!s.reload?(n(),V(g,{key:0,class:"w-full",conf:p},null,8,["conf"])):v("",!0)]))),128))])]),_:1})])]),i("div",P,[i("div",B,[w(C,{class:"p-button w-4 mt-1 p-button-success",label:"Run",onClick:m.updateCode},null,8,["onClick"]),t[4]||(t[4]=i("hr",null,null,-1)),i("div",H,[i("div",q,[i("h6",null,"Configurazione View "+u(s.wSelected),1),t[0]||(t[0]=i("div",{class:"font-italic"},"Iniziare il codice sempre con var conf = ",-1)),t[1]||(t[1]=i("div",{id:"example",class:"h-20rem w-full"},null,-1))]),i("div",M,[i("h6",null,"Configurazione di default "+u(s.viewType),1),t[2]||(t[2]=i("div",{id:"defaultCode",class:"h-20rem w-full"},null,-1))])]),s.wSelected?(n(),l("div",R,[t[3]||(t[3]=i("h5",null,"codice",-1)),i("pre",{innerHTML:m.getCodeJs()},null,8,J)])):v("",!0)])])])])])}const U=x(A,[["render",W]]);export{U as default};
