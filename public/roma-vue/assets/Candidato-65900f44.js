import{s as v,r as B,o as p,c as b,b as g,n as D,a as t,t as r,S as q,C as h,A as H,u as N,v as R,f as x,i as Y,e as M,w as c,x as L,z as $,F as E,d as I,l as P,y as U}from"./index-e35bfe49.js";import{h as G}from"./moment-a9aaa855.js";const J={class:"flex flex-wrap justify-content-start align-items-center gap-2"},K={__name:"Download",props:{url:String,label:String,cssClass:String,method:String},setup(A){const i=A,_=v(i.url),y=v(i.label),C=v(i.cssClass),k=v(i.method);function w(u,m,z){z==="post"?q.post(u,m,function(o){if(h.waitEnd(),o.error){h.errorDialog(o.msg);return}let e=o.result.name?o.result.name:"file.pdf";H.createRuntimeDownload(o.result.content,o.result.mime,e)}):q.get(u,m,function(o){if(h.waitEnd(),o.error){h.errorDialog(o.msg);return}let e=o.result.name?o.result.name:"file.pdf";H.createRuntimeDownload(o.result.content,o.result.mime,e)})}return(u,m)=>{const z=B("Button");return p(),b("div",J,[g(z,{severity:"primary",icon:"fa fa-download",class:D(C.value),onClick:m[0]||(m[0]=o=>w(_.value,{},k.value))},null,8,["class"]),t("div",null,r(y.value),1)])}}};const O={key:0,class:"container flex flex-column min-h-screen bg-white"},Q={class:"py-5 px-4"},W={class:"text-center text-primary"},X={class:"text-center"},Z={class:"flex justify-content-between align-items-center"},V={class:"text-left text-xl"},j={key:0,class:""},ee={key:0,class:"text-xl"},te={class:"text-left text-xl"},ie=["innerHTML"],oe={class:"grid text-center mt-5 md:text-left"},se={class:"col-12 xl:col-6"},ae=["innerHTML"],le={class:"col-12 xl:col-6"},ne={class:"grid text-center mt-5 md:text-left text-xl"},re={class:"col-9 border-left-1"},de={key:0},ce={key:1},_e={class:"col-9 border-left-1"},ue={class:"col-9 border-left-1"},me={class:"col-9 border-left-1"},ve={class:"col-12 xl:col-6"},fe=["innerHTML"],pe={class:"col-12 xl:col-6"},ge=["innerHTML"],xe={class:"col-12 xl:col-12"},be={class:"grid text-center mt-5 md:text-left text-xl"},he={class:"col-12"},ze={id:"table_info"},Ce={__name:"Candidato",setup(A){const i=v({}),_=v({}),y=v(!0),C=N(),k=v([]),w=v([{field:"materia_id",header:"Materia"},{field:"voto_anno_2",header:"Voto due anni precedenti"},{field:"voto_anno_1",header:"Voto ultimo anno"},{field:"voto_primo_quadrimestre",header:"Voto primo quadrimestre"}]);R(()=>{q.get("/api/foorm/candidato/"+C.params.candidatoId,{},function(o){if(o.error){h.errorDialog(o.msg);return}i.value=o.result,_.value=o.metadata,k.value=[];for(var e in i.value.voti){var a=i.value.voti[e],d={materia_id:u("voti.materia_id","select",null,!0,a.materia_id),voto_anno_2:a.voto_anno_2,voto_anno_1:a.voto_anno_1,voto_primo_quadrimestre:a.voto_primo_quadrimestre};k.value.push(d)}y.value=!1})});function u(o,e,a,d,s){var n=o.split("."),f="";s||(n.length===1?(f=h.translate("candidato.fields."+o+".label"),s=i.value[o]):n.length===2&&(f=h.translate("candidato.relations."+n[0]+".label"),s=i.value[n[0]]?i.value[n[0]][n[1]]:""));var l="";switch(e){case"comune":var F=parseInt(i.value.nazione_id);F===1?l=i.value.comune?i.value.comune.nome:"":l=i.value.comune_estero;break;case"date":l=z(s);break;case"checkbox":Array.isArray(s)||(l="");for(var S of s)l+=_.value.fields[o].options[S]+"<br/>";break;case"checkbox-relation":Array.isArray(s)||(l="");for(var S of s)l+=_.value.relations[o].options[S]+"<br/>";break;case"select":if(console.log("AAAAA ",n[0],n[1],s),!s||s===-1)break;n.length===2?l=_.value.relations[n[0]].fields[n[1]].options[s]:l=_.value.fields[o].options[s];break;case"select-altro":if(!s||s===-1)break;n.length===2?l=_.value.relations[n[0]].fields[n[1]].options[s]:l=_.value.fields[o].options[s],i.value[a]&&(l+=" - "+i.value[a]);break;default:l=s||""}if(d)return l;var T=`<div class="col-4 font-bold text-right">
`+f.charAt(0).toUpperCase()+f.slice(1)+`</div>
<div class="col-8 border-left-1">
`+l+"</div>";return T}function m(o){var e=[],a=[];switch(o){case"anagrafica":e=["nome","cognome","codice_fiscale","luogo_nascita","data_nascita","sesso","emails","nazione.nome","regione.nome","provincia.sigla","comune","indirizzo","cap","gen1_titolo_studio_id","gen2_titolo_studio_id","gen1_professione_id","gen2_professione_id"],a={comune:"comune",data_nascita:"date",gen1_titolo_studio_id:"select",gen2_titolo_studio_id:"select",gen1_professione_id:"select-altro:gen1_professione_altro",gen2_professione_id:"select-altro:gen2_professione_altro"};break;case"profilo":e=["profilo","inglese_livello_linguistico_id","francese_livello_linguistico_id","tedesco_livello_linguistico_id","spagnolo_livello_linguistico_id","cinese_livello_linguistico_id","altre_competenze_linguistiche","esperienze_estere","materie_preferite","settore_professionale","motivazioni","modalita_conoscenza_sns_id"],a={inglese_livello_linguistico_id:"select",francese_livello_linguistico_id:"select",tedesco_livello_linguistico_id:"select",spagnolo_livello_linguistico_id:"select",cinese_livello_linguistico_id:"select",modalita_conoscenza_sns_id:"select"};break;case"concorsi":e=["olimpiadi_matematica","olimpiadi_fisica","olimpiadi_matematica_squadre","olimpiadi_matematica_squadre_femminili","olimpiadi_fisica_squadre_miste","olimpiadi_scienze_naturali","giochi_chimica","olimpiadi_informatica","stages","gare_internazionali","gare_umanistiche","partecipazione_concorsi"],a={olimpiadi_matematica:"select",olimpiadi_fisica:"select",olimpiadi_matematica_squadre:"select",olimpiadi_matematica_squadre_femminili:"select",olimpiadi_fisica_squadre_miste:"select",olimpiadi_scienze_naturali:"select",giochi_chimica:"select",olimpiadi_informatica:"select",stages:"checkbox",gare_internazionali:"checkbox",gare_umanistiche:"checkbox"};break;case"preferenze":e=["materie_preferite","settore_professionale","motivazioni","modalita_conoscenza_sns_id"],a={corsi:"checkbox-relation",modalita_conoscenza_sns_id:"select"};break}var d="";for(var s of e){var n=null,f=a[s]||"standard",l=f.split(":");l.length===2&&(f=l[0],n=l[1]),d+=u(s,f,n)}return d}function z(o){let e=this;var a=G(o);return a.isValid()?a.format("DD/MM/YYYY"):e.translate("N.D.")}return(o,e)=>{const a=B("Card");return y.value?M("",!0):(p(),b("div",O,[t("section",Q,[t("h2",W," Candidatura di "+r(i.value.nome)+" "+r(i.value.cognome),1),t("h4",X," per l'iniziativa "+r(i.value.iniziativa.titolo),1),e[17]||(e[17]=t("hr",null,null,-1)),t("div",Z,[t("div",null,[t("p",V,[e[1]||(e[1]=x(" Status attuale: ")),t("strong",{style:Y("color:"+i.value.color)},r(u("status","select",null,!0)),5),e[2]||(e[2]=t("br",null,null,-1)),i.value.data_candidatura?(p(),b("span",j,[e[0]||(e[0]=x(" Data invio candidatura: ")),t("strong",null,r(z(i.value.data_candidatura)),1)])):M("",!0)]),i.value.attachments.length>0?(p(),b("div",ee,[e[3]||(e[3]=x(" Scarica gli allegati della domanda: ")),g(K,{url:"/api/foormaction/media-download/candidato/list/"+i.value.id,method:"post"},null,8,["url"])])):M("",!0)]),t("div",null,[t("p",te,[e[4]||(e[4]=x(" Preferenze sui corsi:")),e[5]||(e[5]=t("br",null,null,-1)),t("strong",{innerHTML:u("corsi","checkbox-relation",null,!0)},null,8,ie)])])]),e[18]||(e[18]=t("hr",null,null,-1)),t("div",oe,[t("div",se,[g(a,{class:"border-1 border-gray-500"},{title:c(()=>e[6]||(e[6]=[t("span",{class:"text-primary"}," Dati personali e familiari ",-1)])),content:c(()=>[t("div",{class:"grid text-center mt-5 md:text-left text-xl",innerHTML:m("anagrafica")},null,8,ae)]),_:1})]),t("div",le,[g(a,{class:"border-1 border-gray-500"},{title:c(()=>e[7]||(e[7]=[t("span",{class:"text-primary"}," Scuola di provenienza ",-1)])),content:c(()=>[t("div",ne,[e[10]||(e[10]=t("div",{class:"col-3 font-bold text-right"}," Scuola ",-1)),t("div",re,[i.value.scuola&&i.value.scuola.denominazione?(p(),b("div",de,[x(r(i.value.scuola.denominazione)+" ("+r(i.value.scuola.codice)+") ",1),e[8]||(e[8]=t("br",null,null,-1)),x(" "+r(i.value.scuola.tipologia_grado_istruzione)+" ",1),e[9]||(e[9]=t("br",null,null,-1)),x(" "+r(i.value.scuola.comune)+" - Provincia di: "+r(u("provincia_id","select",null,!0)),1)])):(p(),b("div",ce,r(i.value.scuola_estera),1))]),e[11]||(e[11]=t("div",{class:"col-3 font-bold text-right"}," Classe ",-1)),t("div",_e,r(i.value.classe),1),e[12]||(e[12]=t("div",{class:"col-3 font-bold text-right"}," Sezione ",-1)),t("div",ue,r(i.value.sezione),1),e[13]||(e[13]=t("div",{class:"col-3 font-bold text-right"}," Media ",-1)),t("div",me,r(i.value.media),1)])]),_:1})]),t("div",ve,[g(a,{class:"border-1 border-gray-500"},{title:c(()=>e[14]||(e[14]=[t("span",{class:"text-primary"}," Profilo, competenze ed esperienze ",-1)])),content:c(()=>[t("div",{class:"grid text-center mt-5 md:text-left text-xl",innerHTML:m("profilo")},null,8,fe)]),_:1})]),t("div",pe,[g(a,{class:"border-1 border-gray-500"},{title:c(()=>e[15]||(e[15]=[t("span",{class:"text-primary"}," Partecipazioni a concorsi ",-1)])),content:c(()=>[t("div",{class:"grid text-center mt-5 md:text-left text-xl",innerHTML:m("concorsi")},null,8,ge)]),_:1})]),t("div",xe,[g(a,{class:"border-1 border-gray-500"},{title:c(()=>e[16]||(e[16]=[t("span",{class:"text-primary"}," Voti ",-1)])),content:c(()=>[t("div",be,[t("div",he,[t("div",ze,[g(L($),{value:k.value,stripedRows:"",tableStyle:"min-width: 50rem"},{default:c(()=>[(p(!0),b(E,null,I(w.value,d=>(p(),P(L(U),{key:d.field,field:d.field,header:d.header,class:D(o.text-o.right)},{body:c(s=>[t("div",{class:D(d.field==="materia_id"?"text-left":"text-right")},r(s.data[d.field]),3)]),_:2},1032,["field","header","class"]))),128))]),_:1},8,["value"])])])])]),_:1})])])])]))}}};export{Ce as default};
