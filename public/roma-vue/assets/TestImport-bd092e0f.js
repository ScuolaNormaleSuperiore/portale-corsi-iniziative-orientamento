import{_,r as s,o as l,c as f,b as o,x as v,m as C,d as g,t as d,z as h}from"./index-0901ac10.js";import{J as w}from"./JsToCode-174725a0.js";const r={cRef:"importComune",modelName:"dcomune",providerName:"dcomune",confUpload:{value:null,name:"resource",maxFileSize:"2M",modelName:"dcomune",extensions:["csv","doc"],ajaxFields:{resource_type:"attachment",field:"resource"}},viewUpload:{fields:[],fieldsConfig:{vettore_id:{type:"w-select"},giorni:{type:"w-checkbox"}}},viewList:{type:"v-list",fields:["datafile_sheet","row","codice_regione","codice_provincia_nuovo","codice_provincia","progressivo_comune","codice_istat","nome_all","nome_it","nome_altra_lingua","codice_area","area","regione","provincia","tipo_provincia","capoluogo","sigla_provincia","codice_istat_numerico","codice_istat_numerico_110","codice_istat_numerico_107","codice_istat_numerico_103","codice_catastale","codice_nuts_1","codice_nuts_2","codice_nuts_3"]},viewSave:{routeName:null,type:"v-edit"},listData:{fields:[],fieldsConfig:{}}},y=h.cImport,c=new w,x={name:"TestImport",components:{cImport:y},mounted(){let e=this;setTimeout(function(){c.loadVisLib(function(){console.debug("OK",document.getElementById("example")),e.dynamicCode=c.getSourceCode(e.importConf),e.editor=ace.edit("example",{theme:"ace/theme/textmate",mode:"ace/mode/javascript",value:"var conf = "+e.dynamicCode}),e.editorDefault=ace.edit("defaultCode",{theme:"ace/theme/textmate",mode:"ace/mode/javascript",value:"var conf = {}"})})},200)},data(){return console.log("configuration",r),{importConf:r,dynamicCode:"",editor:null,editorDefault:null,reload:!1}},methods:{updateCode(){let e=this,t=e.editor.getValue(),n=c.updateCode(t);e.reload=!0,setTimeout(function(){try{e.importConf=window[n](),e.reload=!1}catch(i){throw e.errorDialog(i),i}},20)}}},N={class:"grid"},k={class:"col-12"},B={class:"col-12"},b={class:"grid"},D={class:"col-6"},I={class:"col-6"};function T(e,t,n,i,a,m){const u=s("c-import"),p=s("Button");return l(),f("div",N,[o("div",k,[a.reload?C("",!0):(l(),v(u,{key:0,conf:a.importConf},null,8,["conf"]))]),o("div",B,[g(p,{class:"p-button w-4 mt-1",label:"Run",onClick:m.updateCode},null,8,["onClick"]),t[3]||(t[3]=o("hr",null,null,-1)),o("div",b,[o("div",D,[o("h6",null,"Configurazione View "+d(e.wSelected),1),t[0]||(t[0]=o("div",{class:"font-italic"},"Iniziare il codice sempre con var conf = ",-1)),t[1]||(t[1]=o("div",{id:"example",class:"h-20rem w-full"},null,-1))]),o("div",I,[o("h6",null,"Configurazione di default "+d(e.viewType),1),t[2]||(t[2]=o("div",{id:"defaultCode",class:"h-20rem w-full"},null,-1))])])])])}const S=_(x,[["render",T]]);export{S as default};
