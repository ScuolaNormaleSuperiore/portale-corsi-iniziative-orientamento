import{s as l,p as n,v as R,r as i,o as c,c as m,a as t,b as a,w as p,F as w,t as V,x as U,d as F}from"./index-e35bfe49.js";const L={class:"flex mb-3"},M={class:"grid"},E={class:"col-2"},x="/api/superadmin",q={__name:"RuoliPage",setup(O){const v=l(),u=l(!1),_=l(n.CrudCore.translate("seleziona modello e permessi")),f=l([{id:"aa",label:"Prova"}]),d=l(null),r=l([]),b=l({}),g=l([]),k={modelName:"role",type:"v-list",actions:["action-view"],actionsConfig:{"action-view":{execute(){console.debug("roles",this.modelData),b.value=this.modelData,_.value=this.modelData.name+": "+n.CrudCore.translate("seleziona modello e permessi"),v.value.load()}}}},y={modelName:"permission",type:"v-list",actions:["action-delete","action-insert"],autoload:!1,actionsConfig:{"action-insert":{execute(){u.value=!0}}}};R(()=>{console.debug("onmounted"),n.Server.get(x+"/models-permessi",{},o=>{console.debug("json",o),f.value=o.models;for(let e in o.permessi)g.value.push({code:o.permessi[e],label:o.permessi[e]})})});function D(){u.value=!1,n.Server.post(x+"/save-permessi",{role_id:b.value.id,modelName:d.value,permessi:r.value},o=>{})}function S(o){console.debug("selezionato modello",d.value)}return(o,e)=>{const C=i("v-list"),h=i("Dropdown"),B=i("Checkbox"),N=i("Button"),P=i("Dialog");return c(),m(w,null,[t("div",null,[a(C,{conf:k}),a(C,{ref_key:"pView",ref:v,conf:y},null,512)]),a(P,{visible:u.value,"onUpdate:visible":e[3]||(e[3]=s=>u.value=s),modal:!0,style:{width:"40vw"}},{header:p(()=>[t("h3",null,V(_.value),1)]),footer:p(()=>[a(N,{label:U(n).CrudCore.translate("app.ok"),icon:"pi pi-check",autofocus:"",onClick:e[2]||(e[2]=s=>D())},null,8,["label"])]),default:p(()=>[t("div",L,[e[4]||(e[4]=t("label",null,"Modello",-1)),a(h,{class:"w-7 ml-2",modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=s=>d.value=s),options:f.value,optionLabel:"label",optionValue:"id",onChange:S},null,8,["modelValue","options"])]),t("div",M,[(c(!0),m(w,null,F(g.value,s=>(c(),m("div",E,[a(B,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=z=>r.value=z),value:s.code},null,8,["modelValue","value"]),t("label",null,V(s.label),1)]))),256))])]),_:1},8,["visible"])],64)}}};export{q as default};
