import{J as x}from"./JsToCode-18db666b.js";import{_,p as k,r as u,o as i,c as s,a,F as c,d as g,b as m,e as C,w as T,t as f,n as S,l as V}from"./index-bf457788.js";const r=new x,b={name:"TestWidgets",extends:k.CrudComponent,inject:["store"],data(){window.TW=this;let e=this.$route.params&&this.$route.params.case||null;return e&&(e=decodeURI(e)),{widgetSelected:e,widgetsConf:{"w-hidden":this.wHiddenConf(),"w-text":this.wTextConf(),"w-input":this.wInputConf(),"w-select":this.wSelectConf(),"w-autocomplete":this.wAutocompleteConf(),"w-checkbox":this.wCheckboxConf(),"w-radio":this.wRadioConf(),"w-hasmany":this.wHasmany("record"),"w-hasmany-list":this.wHasmany("list"),"w-belongsto":this.wBelongstoConf(),"w-custom":this.wCustomConf(),"w-color-picker":this.wColorPickerConf(),"w-date-picker":this.wDatePickerConf(),"w-date-text":this.wDateTextConf(),"w-date-text2":this.wDateTextConf2(),"w-textarea":this.wTextareaConf(),"w-multi-select":this.wMultiSelectConf(),"w-swap":this.wSwapConf(),"w-status con icon":this.wStatusConf(),"w-status con testo":this.wStatusTextConf(),"w-texthtml":this.wTexthtmlConf(),"w-upload":this.wUploadConf(),"w-upload-ajax":this.wUploadAjaxConf(),"w-chip":this.wChipConf()},fIndex:0,dynamicCode:"",defaultCode:"",reload:!1,editor:null,editorDefault:null,widgetType:""}},mounted(){let e=this;setTimeout(function(){r.loadVisLib(function(){console.debug("OK",document.getElementById("example")),e.editor=ace.edit("example",{theme:"ace/theme/textmate",mode:"ace/mode/javascript",value:"var conf = {}"}),e.editorDefault=ace.edit("defaultCode",{theme:"ace/theme/textmate",mode:"ace/mode/javascript",value:"var conf = {}"}),e.widgetSelected&&e.setCode()})},200)},watch:{widgetSelected(){this.setCode()}},methods:{setCode(){let e=this,t=this.widgetsConf[this.widgetSelected];this.dynamicCode=r.getSourceCode(t),this.editor&&this.editor.setValue("var conf = "+this.dynamicCode),this.widgetType=e.widgetsConf[e.widgetSelected].type;let n=r.getWidgetDefaultConf(this.widgetType);e.defaultCode=r.getSourceCode(n),this.editorDefault&&e.editorDefault.setValue("var conf = "+e.defaultCode)},updateCode(){let e=this,t=e.editor.getValue(),n=r.updateCode(t);e.reload=!0,setTimeout(function(){try{e.widgetsConf[e.widgetSelected]=window[n](),e.reload=!1}catch(d){throw console.debug("funzione chiamata",n,window[n]),e.errorDialog(d),d}},20)},getWidget(e){return this.$refs[e][0].instance()},makeid(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d=n.length,o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*d));return t},aggiornaText(){this.widgetsConf["w-text"].value=this.makeid(10)},wChipConf(){return{type:"w-chip",name:"field1",value:["testone"],change(){console.log("chip value",this.getValue())}}},wHiddenConf(){return{type:"w-hidden",name:"field1",value:"testone"}},wTextConf(){return{type:"w-text",name:"field1",value:"testone"}},wInputConf(){return{inputType:"text",value:"220",change(e){let t=this;console.log("value",t.getValue(),"that",t,"event",e)}}},wSelectConf(){return{value:20,name:"field1",type:"w-select",domainValues:{10:"Dieci",20:"Venti",30:"Trenta"},change(){console.log("value",this.value)}}},wAutocompleteConf(){return{type:"w-autocomplete",name:"email",labelFields:["email"],value:2,foormName:"user",viewType:"edit",referredData:{id:2,email:"ciullo@gmail.com",name:"Pier Paolo Ciullo"},clearButton:!0,extraBind:{"option-label":"name"}}},wCheckboxConf(){return{type:"w-checkbox",value:["1","4"],domainValues:{1:"Uno",2:"Due",3:"Tre",4:"Quattro",5:"Cinque"},change(){console.log(this.value)}}},wRadioConf(){return{type:"w-radio",value:"1",name:"field1",domainValues:{0:"Zero",1:"Uno",2:"Due",3:"Tre"},domainValuesOrder:[3,2,1,0],change(){console.log("change ",this.getValue())}}},wHasmany(e){let t={name:"field1",label:"Hasmany",type:"w-hasmany",hasmanyType:e,hasmanyConf:{fields:["id","nome","descrizione","resource"],defaultWidgetType:"w-input",fieldsConfig:{id:{type:"w-hidden"},nome:{type:"w-input"},resource:{type:"w-input"}}},value:[{nome:"nome uno",descrizione:"descrizione presente",resource:"de ma de"},{nome:"nome u432",descrizione:"descrizione presensssste",resource:"de ma de"}],limit:3,change(){console.log("change ",this.getValue())}};return e=="list"&&(t.hasmanyConf.actions=["action-insert","action-delete-selected"]),t},wBelongstoConf(){return{name:"user",type:"w-belongsto",cRef:"wTest",separator:"--",labelFields:["email"],value:{id:3,email:"amministratore@amministratore.it"}}},wCustomConf(){return{type:"w-custom",value:"ciao <b>tutti</b>"}},wColorPickerConf(){return{type:"w-color-picker",value:"#FF00FF"}},wDatePickerConf(){return{value:"2020-12-20",buttonClear:!0,type:"w-date-picker",change(){console.log("date-picker",this.value)}}},wDateTextConf(){return{type:"w-date-text",value:"2021-12-09",displayFormat:"LLL"}},wDateTextConf2(){return{type:"w-date-text",value:"2021-12-18",displayFormat:"giorno DD anno YYYY mese MM"}},wTextareaConf(){return{type:"w-textarea",value:"text area prvoa",change(){console.log("textarea value ",this.getValue())}}},wMultiSelectConf(){return{value:[20,30],name:"field1",type:"w-multi-select",domainValues:{10:"Dieci",20:"Venti",30:"Trenta",40:"Quaranta"},change(){console.log("change ",this.getValue())}}},wSwapConf(){return{type:"w-swap",value:0,name:"banned",onIcon:"fa fa-circle",modelData:{id:4},modelName:"user",routeName:"set",change(){console.log("change ",this.getValue())}}},wStatusConf(){return{value:7,statusType:"icon",type:"w-status",domainValues:{5:"fa fa-times text-red-600",6:"fa fa-gear text-green-600",7:"fa fa-question text-yellow-600"}}},wStatusTextConf(){return{value:5,statusType:"text",type:"w-status",domainValues:{5:"Ciao bello",6:"Prova",7:"Sette"}}},wTexthtmlConf(){return{value:"text area prvoa",type:"w-texthtml",change(){console.log("change",this.getValue())}}},wUploadConf(){return{name:"field1",type:"w-upload",maxFileSize:"2M",extensions:["pdf","xls","png"],modelName:"user",value:{id:"files/allegati/allegato_1_1643619308.pdf",url:"downloadmediable/attachment/1",mimetype:"application/pdf"},ajaxFields:{resource_type:"attachment",field:"name"},methods:{change:function(){console.log("my change",this.getValue())}}}},wUploadAjaxConf(){return{name:"field1",type:"w-upload-ajax",maxFileSize:"2M",extensions:["pdf","xls","png"],modelName:"user",value:{id:"files/allegati/allegato_1_1643619308.pdf",url:"downloadmediable/attachment/1",mimetype:"application/pdf"},ajaxFields:{resource_type:"attachment",field:"name"},methods:{change:function(){console.log("my change",this.getValue())}}}},addHasmany(){let e=this;e.$refs[e.widgetSelected][0];let t=1+parseInt(Math.floor(Math.random()*10))%2;console.log("nitem",t),e.$refs[e.widgetSelected][0].setValue([{nome:e.makeid(7),descrizione:e.makeid(23),resource:e.makeid(10)},{nome:e.makeid(7),descrizione:e.makeid(23),resource:e.makeid(10)},{nome:e.makeid(7),descrizione:e.makeid(23),resource:e.makeid(10)}])}}},D={class:"grid"},F={class:"col-12"},z={class:"card"},B=["href"],j={key:0},M={class:"grid"},W={class:"col-6"},I={class:"col-6"};function H(e,t,n,d,o,w){const h=u("Button"),y=u("c-widget"),v=u("Fieldset");return i(),s("div",D,[a("div",F,[a("div",z,[t[4]||(t[4]=a("h5",null,"Widgets",-1)),a("div",null,[(i(!0),s(c,null,g(o.widgetsConf,(p,l)=>(i(),s("a",{key:l,class:S(["p-button m-1 p-2",o.widgetSelected===l?"":"p-button-outlined"]),href:"#/test2-widgets/"+l},f(l),11,B))),128))]),t[5]||(t[5]=a("hr",null,null,-1)),a("div",null,[a("div",null,[["w-hasmany","w-hasmany-list"].indexOf(o.widgetSelected)>=0?(i(),s("div",j,[m(h,{icon:"fa fa-plus",onClick:w.addHasmany,label:"setValue dall'esterno"},null,8,["onClick"])])):C("",!0),m(v,{legend:"Area Widget"},{default:T(()=>[(i(!0),s(c,null,g(o.widgetsConf,(p,l)=>(i(),s(c,{key:l},[o.widgetSelected==l&&!o.reload?(i(),V(y,{key:0,class:"w-full",ref_for:!0,ref:l,conf:p},null,8,["conf"])):C("",!0)],64))),128))]),_:1}),m(h,{class:"p-button w-4 mt-1",label:"Run",onClick:w.updateCode},null,8,["onClick"]),t[3]||(t[3]=a("hr",null,null,-1)),a("div",M,[a("div",W,[a("h6",null,"Configurazione Widget "+f(o.widgetType),1),t[0]||(t[0]=a("div",{class:"font-italic"},"Iniziare il codice sempre con var conf = ",-1)),t[1]||(t[1]=a("div",{id:"example",class:"h-20rem w-full"},null,-1))]),a("div",I,[a("h6",null,"Configurazione di default "+f(o.widgetType),1),t[2]||(t[2]=a("div",{id:"defaultCode",class:"h-20rem w-full"},null,-1))])])])])])])])}const A=_(b,[["render",H],["__scopeId","data-v-af4e9450"]]);export{A as default};
