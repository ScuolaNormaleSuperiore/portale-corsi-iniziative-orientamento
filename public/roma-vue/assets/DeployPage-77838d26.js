import{_ as U,r as b,o as m,c as h,a as l,b as a,F as M,d as T,i as _,p as C,a0 as d,a1 as v,l as w,w as O,t as y,n as x}from"./index-e35bfe49.js";import{U as L}from"./Utility-37494689.js";import{h as A}from"./moment-a9aaa855.js";const R={emits:["layout-change","menu-color-change","profile-mode-change","orientation-change","topbar-color-change","theme-change"],props:{layoutMode:{type:String,default:null},lightMenu:{type:Boolean,default:null},inlineUser:{type:Boolean,default:null},isRTL:{type:Boolean,default:null},topbarColor:{type:String,default:null},topbarColors:{type:Array,default:null},theme:{type:String,default:null},themes:{type:Array,default:null}},data(){return console.debug("PRIME Themes",this.themes),{active:!1,d_layoutMode:this.layoutMode,d_lightMenu:this.lightMenu,d_inlineUser:this.inlineUser,d_isRTL:this.isRTL}},watch:{$route(){this.active&&(this.active=!1,this.unbindOutsideClickListener())},layoutMode(t){this.d_layoutMode=t},lightMenu(t){this.d_lightMenu=t},inlineUser(t){this.d_inlineUser=t},isRTL(t){this.d_isRTL=t}},outsideClickListener:null,methods:{getThemeBorder(t,e){return t===e.file?(console.debug("theme",t,e.file),"3px solid black"):""},getTopbarBorder(t,e){return t===e.topbarColor?(console.debug("getTopbarBorder",t,e.topbarColor),"3px solid black"):""},toggleConfigurator(t){this.active=!this.active,t.preventDefault(),this.active?this.bindOutsideClickListener():this.unbindOutsideClickListener()},hideConfigurator(t){this.active=!1,this.unbindOutsideClickListener(),t.preventDefault()},changeInputStyle(t){this.$primevue.config.inputStyle=t},changeRipple(t){this.$primevue.config.ripple=t},changeLayout(t,e){this.$emit("layout-change",e),t.preventDefault()},changeMenuColor(t,e){this.$emit("menu-color-change",e),t.preventDefault()},changeProfileMode(t,e){this.$emit("profile-mode-change",e),t.preventDefault()},changeOrientation(t,e){this.$emit("orientation-change",e),t.preventDefault()},changeTopbarColor(t,e,s){this.$emit("topbar-color-change",e,s),t.preventDefault()},changeTheme(t,e){this.$emit("theme-change",e),t.preventDefault()},bindOutsideClickListener(){this.outsideClickListener||(this.outsideClickListener=t=>{this.active&&this.isOutsideClicked(t)&&(this.active=!1)},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},isOutsideClicked(t){return!(this.$el.isSameNode(t.target)||this.$el.contains(t.target))}},computed:{containerClass(){return["layout-config",{"layout-config-active":this.active}]},rippleActive(){return this.$primevue.config.ripple},inputStyle(){return this.$primevue.config.inputStyle}}},B={class:"flex gap-3 flex-wrap"},I={class:"w-8rem"},j={class:""},E={class:"field-radiobutton md:col-6"},z={class:"field-radiobutton md:col-6"},D={class:"field-radiobutton md:col-6"},P={class:"field-radiobutton md:col-6"},N={class:"w-8rem"},J={class:""},F={class:"field-radiobutton md:col-6"},G={class:"field-radiobutton md:col-6"},H={class:"w-8rem"},W={class:"formgroup-inline grid grid-nogutter"},q={class:"field-radiobutton md:col-6"},K={class:"field-radiobutton md:col-6"},Q={class:"w-8rem"},X={class:"formgroup-inline"},Y={class:"field-radiobutton md:col-6"},Z={class:"field-radiobutton md:col-6"},$={class:"w-8rem"},ee={class:"w-8rem"},te={class:"formgroup-inline grid grid-nogutter"},le={class:"field-radiobutton md:col-6"},oe={class:"field-radiobutton md:col-6"},ne={class:"w-8rem flex-grow-1"},ie={class:"flex flex-wrap"},se=["onClick","title"],ae={class:"w-8rem flex-grow-1"},re={class:"flex flex-wrap"},de=["onClick","title"];function ue(t,e,s,r,i,n){const g=b("RadioButton"),k=b("InputSwitch");return m(),h("div",null,[e[40]||(e[40]=l("div",{class:"layout-config-header"},[l("h3",null,"Theme Customization"),l("span",null,"Roma offers different themes for layout, topbar, menu etc.")],-1)),l("div",B,[l("div",I,[e[24]||(e[24]=l("h6",{class:""},"Menu Mode",-1)),l("div",j,[l("div",E,[a(g,{id:"static",name:"layoutMode",value:"static",modelValue:i.d_layoutMode,"onUpdate:modelValue":e[0]||(e[0]=o=>i.d_layoutMode=o),onChange:e[1]||(e[1]=o=>n.changeLayout(o,"static"))},null,8,["modelValue"]),e[20]||(e[20]=l("label",{for:"static"},"Static",-1))]),l("div",z,[a(g,{id:"overlay",name:"layoutMode",value:"overlay",modelValue:i.d_layoutMode,"onUpdate:modelValue":e[2]||(e[2]=o=>i.d_layoutMode=o),onChange:e[3]||(e[3]=o=>n.changeLayout(o,"overlay"))},null,8,["modelValue"]),e[21]||(e[21]=l("label",{for:"overlay"},"Overlay",-1))]),l("div",D,[a(g,{id:"horizontal",name:"layoutMode",value:"horizontal",modelValue:i.d_layoutMode,"onUpdate:modelValue":e[4]||(e[4]=o=>i.d_layoutMode=o),onChange:e[5]||(e[5]=o=>n.changeLayout(o,"horizontal"))},null,8,["modelValue"]),e[22]||(e[22]=l("label",{for:"horizontal"},"Horizontal",-1))]),l("div",P,[a(g,{id:"slim",name:"layoutMode",value:"slim",modelValue:i.d_layoutMode,"onUpdate:modelValue":e[6]||(e[6]=o=>i.d_layoutMode=o),onChange:e[7]||(e[7]=o=>n.changeLayout(o,"slim"))},null,8,["modelValue"]),e[23]||(e[23]=l("label",{for:"slim"},"Slim",-1))])])]),l("div",N,[e[27]||(e[27]=l("h6",{class:""},"Menu Color",-1)),l("div",J,[l("div",F,[a(g,{id:"dark",name:"lightMenu",value:!1,modelValue:i.d_lightMenu,"onUpdate:modelValue":e[8]||(e[8]=o=>i.d_lightMenu=o),onChange:e[9]||(e[9]=o=>n.changeMenuColor(o,!1))},null,8,["modelValue"]),e[25]||(e[25]=l("label",{for:"dark"},"Dark",-1))]),l("div",G,[a(g,{id:"light",name:"lightMenu",value:!0,modelValue:i.d_lightMenu,"onUpdate:modelValue":e[10]||(e[10]=o=>i.d_lightMenu=o),onChange:e[11]||(e[11]=o=>n.changeMenuColor(o,!0))},null,8,["modelValue"]),e[26]||(e[26]=l("label",{for:"light"},"Light",-1))])])]),l("div",H,[e[30]||(e[30]=l("h6",{class:""},"User Profile",-1)),l("div",W,[l("div",q,[a(g,{id:"inline",name:"inlineUser",disabled:s.layoutMode==="horizontal",value:!0,modelValue:i.d_inlineUser,"onUpdate:modelValue":e[12]||(e[12]=o=>i.d_inlineUser=o),onChange:e[13]||(e[13]=o=>n.changeProfileMode(o,!0))},null,8,["disabled","modelValue"]),e[28]||(e[28]=l("label",{for:"inline"},"Inline",-1))]),l("div",K,[a(g,{id:"overlayUser",name:"inlineUser",disabled:s.layoutMode==="horizontal",value:!1,modelValue:i.d_inlineUser,"onUpdate:modelValue":e[14]||(e[14]=o=>i.d_inlineUser=o),onChange:e[15]||(e[15]=o=>n.changeProfileMode(o,!1))},null,8,["disabled","modelValue"]),e[29]||(e[29]=l("label",{for:"overlayUser"},"Overlay",-1))])])]),l("div",Q,[e[33]||(e[33]=l("h6",{class:""},"Input Background",-1)),l("div",X,[l("div",Y,[a(g,{id:"input_outlined",name:"inputstyle",value:"outlined",modelValue:n.inputStyle,"onUpdate:modelValue":n.changeInputStyle},null,8,["modelValue","onUpdate:modelValue"]),e[31]||(e[31]=l("label",{for:"input_outlined"},"Outlined",-1))]),l("div",Z,[a(g,{id:"input_filled",name:"inputstyle",value:"filled",modelValue:n.inputStyle,"onUpdate:modelValue":n.changeInputStyle},null,8,["modelValue","onUpdate:modelValue"]),e[32]||(e[32]=l("label",{for:"input_filled"},"Filled",-1))])])]),l("div",$,[e[34]||(e[34]=l("span",{class:"section-name"},"Ripple Effect",-1)),a(k,{modelValue:n.rippleActive,"onUpdate:modelValue":n.changeRipple},null,8,["modelValue","onUpdate:modelValue"])]),l("div",ee,[e[37]||(e[37]=l("span",{class:"section-name"},"Orientation",-1)),l("div",te,[l("div",le,[a(g,{id:"ltr",name:"isRTL",value:!1,modelValue:i.d_isRTL,"onUpdate:modelValue":e[16]||(e[16]=o=>i.d_isRTL=o),onChange:e[17]||(e[17]=o=>n.changeOrientation(o,!1))},null,8,["modelValue"]),e[35]||(e[35]=l("label",{for:"ltr"},"LTR",-1))]),l("div",oe,[a(g,{id:"rtl",name:"isRTL",value:!0,modelValue:i.d_isRTL,"onUpdate:modelValue":e[18]||(e[18]=o=>i.d_isRTL=o),onChange:e[19]||(e[19]=o=>n.changeOrientation(o,!0))},null,8,["modelValue"]),e[36]||(e[36]=l("label",{for:"rtl"},"RTL",-1))])])]),l("div",ne,[e[38]||(e[38]=l("h6",null,"Topbar Colors",-1)),l("div",ie,[(m(!0),h(M,null,T(s.topbarColors,o=>(m(),h("div",{key:o.name},[l("a",{class:"p-0 m-2 cursor-pointer",onClick:f=>n.changeTopbarColor(f,o.topbarColor,o.logo),title:o.name},[l("i",{class:"fa-solid fa-square fa-2x p-0",style:_({color:o.color,border:n.getTopbarBorder(s.topbarColor,o)})},null,4)],8,se)]))),128))])]),l("div",ae,[e[39]||(e[39]=l("h6",null,"Component Themes",-1)),l("div",re,[(m(!0),h(M,null,T(s.themes,o=>(m(),h("div",{key:o.name},[l("a",{class:"p-0 m-2 cursor-pointer",onClick:f=>n.changeTheme(f,o.file),title:o.name},[l("i",{class:"fa-solid fa-square fa-2x p-0",style:_({color:o.color,border:n.getThemeBorder(s.theme,o)})},null,4)],8,de)]))),128))])])])])}const ge=U(R,[["render",ue]]);var u=null;const fe={name:"DeployPage",components:{AppConfigFlat:ge},mounted(){let t=this;C.CrudCore.waitStart("connecting websocket..."),L.connectToServer().then(e=>{u=e,console.log("connection",u),u.onopen=function(s){console.log("event on open",s),console.log("Successfully")},u.onmessage=function(s){console.log("onmessage",s.data);let r=JSON.parse(s.data);var i=`
`+A().format("HH:mm:ss")+`
`;switch(r.action){case"stdout":i+=r.data.split(`\r
`).reverse().join(`\r
`),t.bufferOut=i+t.bufferOut;break;case"stderr":i+=r.data.split(`\r
`).reverse().join(`\r
`),t.bufferErr=i+t.bufferErr;break;case"error":i+=r.data.split(`\r
`).reverse().join(`\r
`),t.bufferErr=i+t.bufferErr;break;default:r.error?C.CrudCore.alertError(r.msg):r.resultCommand&&C.CrudCore.alertSuccess(r.resultCommand);break}t.serverStatus=r.number},C.CrudCore.waitEnd()}).catch(e=>{console.error(e),C.CrudCore.alertError(e)})},unmounted(){u&&(u.close(),u=null)},data(){let t=Object.assign(d,{serverStatus:"",bufferOut:"",bufferErr:"",topbarBooleanConfig:L.jsonToProperties(v.boolean),topbarGenericConfig:Object.assign({},v.generic),selectedCategories:[]});console.debug("dt",t);for(let e in v.boolean)v.boolean[e]&&t.selectedCategories.push(e);return window.CAT=t.selectedCategories,t},methods:{changeTopBarConfig(){console.debug("changeTopBarConfig",this.selectedCategories),this.saveTopbarConfig()},testSpawn(){let t={action:"test-spawn"};u.send(JSON.stringify(t))},saveTopbarConfig(){let t=Object.assign({},v);console.debug("confs",t);for(let s in t.boolean)console.log("k",s),this.selectedCategories.indexOf(s)>=0?t.boolean[s]=!0:t.boolean[s]=!1;console.debug("nuove configurazioni",t);let e={action:"save-topbarconfig",filename:"topbar.json",body:t};u.send(JSON.stringify(e))},generateTemplates(){let t={action:"genera-templates"};u.send(JSON.stringify(t))},testExec(){let t={action:"test-exec"};u.send(JSON.stringify(t))},generaTemplate(){let t={action:"generate-templates"};u.send(JSON.stringify(t))},publish(){this.bufferErr="",this.bufferOut="",this._publish()},translate(){this.bufferErr="",this.bufferOut="",this._translate()},generateImport(){let t={action:"generate-import"};u.send(JSON.stringify(t))},_publish(){let t={action:"publish"};u.send(JSON.stringify(t))},_translate(){let t={language:"it",action:"translate"};u.send(JSON.stringify(t))},onLayoutChange(t){this.layoutMode=t,this.staticMenuDesktopInactive=!1,this.overlayMenuActive=!1,(this.isSlim()||this.isHorizontal())&&(this.inlineUser=!1,this.inlineUserMenuActive=!1),this.saveConfig()},onMenuColorChange(t){this.lightMenu=t,this.saveConfig()},onProfileModeChange(t){this.inlineUser=t,this.saveConfig()},onChangeOrientation(t){this.isRTL=t,this.saveConfig()},onTopbarColorChange(t,e){this.topbarColor=t;const s=document.getElementById("topbar-logo");s.src="/layout/images/"+e+".svg",this.saveConfig()},onThemeChange(t){this.theme=t,this.changeStyleSheetUrl("layout-css",t,"layout"),this.changeStyleSheetUrl("theme-css",t,"theme"),this.saveConfig()},changeStyleSheetUrl(t,e,s){let r=document.getElementById(t),i=r.getAttribute("href").split("/");i[i.length-1]=s+"-"+e+".css";let n=i.join("/");this.replaceLink(r,n)},replaceLink(t,e){const s=t.getAttribute("id"),r=t.cloneNode(!0);r.setAttribute("href",e),r.setAttribute("id",s+"-clone"),t.parentNode.insertBefore(r,t.nextSibling),r.addEventListener("load",()=>{t.remove(),r.setAttribute("id",s)})},isSlim(){return this.layoutMode==="slim"},isTablet(){let t=window.innerWidth;return t<=1024&&t>640},isDesktop(){return window.innerWidth>896},isMobile(){return window.innerWidth<=1025},isHorizontal(){return this.layoutMode==="horizontal"},saveConfig(){d.layoutMode=this.layoutMode,d.staticMenuDesktopInactive=this.staticMenuDesktopInactive,d.overlayMenuActive=this.overlayMenuActive,d.inlineUser=this.inlineUser,d.inlineUserMenuActive=this.inlineUserMenuActive,d.lightMenu=this.lightMenu,d.isRTL=this.isRTL,d.inlineUser=this.inlineUser,d.topbarMenuActive=this.topbarMenuActive,d.activeTopbarItem=this.activeTopbarItem,d.rightPanelMenuActive=this.rightPanelMenuActive,d.inlineUserMenuActive=this.inlineUserMenuActive,d.menuActive=this.menuActive,d.topbarColor=this.topbarColor,d.theme=this.theme,console.debug("TEMPLATECONFIG",d);let t={action:"save-config",data:d};u.send(JSON.stringify(t)),setTimeout(function(){document.location.reload()},200)}}},me={class:"grid"},he={class:"col-6"},ce={class:"card flex justify-content-left"},pe={class:"flex flex-column gap-3"},be=["for"],Ce={class:"col-6"},ve={class:"card flex justify-content-center"},ye={class:"flex flex-column gap-3"},Me=["for"],Te={class:"flex"},ke={class:"flex gap-2"},_e={class:"w-full overflow-auto h-30rem min-h-30rem"},Le={class:"text-red-500"};function Ue(t,e,s,r,i,n){const g=b("AppConfigFlat"),k=b("InputText"),o=b("Checkbox"),f=b("Button"),V=b("Card");return m(),w(V,null,{content:O(()=>[a(g,{layoutMode:t.layoutMode,onLayoutChange:n.onLayoutChange,lightMenu:t.lightMenu,onMenuColorChange:n.onMenuColorChange,inlineUser:t.inlineUser,onProfileModeChange:n.onProfileModeChange,isRTL:t.isRTL,onOrientationChange:n.onChangeOrientation,topbarColor:t.topbarColor,topbarColors:t.topbarColors,onTopbarColorChange:n.onTopbarColorChange,theme:t.theme,themes:t.themeColors,onThemeChange:n.onThemeChange},null,8,["layoutMode","onLayoutChange","lightMenu","onMenuColorChange","inlineUser","onProfileModeChange","isRTL","onOrientationChange","topbarColor","topbarColors","onTopbarColorChange","theme","themes","onThemeChange"]),e[3]||(e[3]=l("h4",null," Topbar config ",-1)),l("div",me,[l("div",he,[l("div",ce,[l("div",pe,[(m(!0),h(M,null,T(t.topbarGenericConfig,(p,c)=>(m(),h("div",{key:c,class:"flex w-full gap-1"},[l("label",{for:c},y(c),9,be),a(k,{class:"flex-grow-1",modelValue:t.topbarGenericConfig[c],"onUpdate:modelValue":S=>t.topbarGenericConfig[c]=S,name:c,value:p},null,8,["modelValue","onUpdate:modelValue","name","value"])]))),128))])])]),l("div",Ce,[l("div",ve,[l("div",ye,[(m(!0),h(M,null,T(t.topbarBooleanConfig,p=>(m(),h("div",{key:p.label,class:"flex align-items-left gap-2 w-full"},[a(o,{multiple:!0,onChange:n.changeTopBarConfig,modelValue:t.selectedCategories,"onUpdate:modelValue":e[0]||(e[0]=c=>t.selectedCategories=c),inputId:p.label,name:"category",value:p.label},null,8,["onChange","modelValue","inputId","value"]),l("label",{for:p.value},y(p.label),9,Me)]))),128))])])])]),l("div",Te,[e[2]||(e[2]=l("h4",{class:"flex-grow-1"}," Deploy applicazione ",-1)),l("div",null,[e[1]||(e[1]=l("label",{class:"flex-grow-1 text-right p-1 pt-3 mr-2"},"WebSocket Server",-1)),l("div",{class:x(["fa fa-circle text-2xl m-2 green blob",t.serverStatus?"text-green-500 ":"text-red-500 "])},null,2)])]),l("div",ke,[a(f,{label:"Publish",onClick:n.publish},null,8,["onClick"]),a(f,{label:"Aggiorna traduzioni",onClick:n.translate},null,8,["onClick"]),a(f,{label:"Aggiorna importazioni",onClick:n.generateImport},null,8,["onClick"]),a(f,{label:"Compilazione Templates",onClick:n.generateTemplates},null,8,["onClick"]),a(f,{label:"Test Spawn",onClick:n.testSpawn},null,8,["onClick"]),a(f,{label:"Test Exec",onClick:n.testExec},null,8,["onClick"])]),l("div",_e,[l("pre",null,"                    "+y(t.bufferOut)+`
                `,1),l("pre",Le,"                    "+y(t.bufferErr)+`
                `,1)])]),_:1})}const Oe=U(fe,[["render",Ue],["__scopeId","data-v-b62daa91"]]);export{Oe as default};
