import{_,r,o as a,c as n,a as t,F as h,m as f,b as w,w as x,t as u,q as v,B as V,z as b}from"./index-edf13628.js";import{J as S}from"./JsToCode-4fdd63c0.js";const k=V.cView,c=new S,N={name:"TestViews",components:{cView:k},inject:["store"],data(){return window.TV=this,{wSelected:null,viewsConf:{"lista statica":this.staticList(),"record statico":this.staticRecord(),"user list":this.userList(),"list edit":this.listEdit(),"user view":this.userView(),"user edit":this.userEdit(),"user edit validate js":this.userEditValidate(),"user search":this.userSearch(),"lista con panel":this.userListPanel(),"lista hide column":this.userListHideColumn(),"lista action select":this.userListActionSelect()},viewType:"",reload:!1}},mounted(){let e=this;setTimeout(function(){c.loadVisLib(function(){console.debug("OK",document.getElementById("example")),e.editor=ace.edit("example",{theme:"ace/theme/textmate",mode:"ace/mode/javascript",value:"var conf = {}"}),e.editorDefault=ace.edit("defaultCode",{theme:"ace/theme/textmate",mode:"ace/mode/javascript",value:"var conf = {}"})})},200)},watch:{wSelected(){let e=this,i=this.viewsConf[this.wSelected];this.dynamicCode=c.getSourceCode(i),this.editor.setValue("var conf = "+this.dynamicCode),this.viewType=e.viewsConf[e.wSelected].type;let o=c.getViewDefaultConf(this.viewType);e.defaultCode=c.getSourceCode(o),e.editorDefault.setValue("var conf = "+e.defaultCode)}},methods:{getCodeJs(){let e=this.viewsConf[this.wSelected];return c.getSourceCode(e)},updateCode(){let e=this,i=e.editor.getValue(),o=c.updateCode(i);e.reload=!0,setTimeout(function(){try{e.viewsConf[e.wSelected]=window[o](),e.reload=!1}catch(d){throw e.errorDialog(d),d}},20)},staticList(){return{type:"v-list",langContext:null,cRef:"cTest",routeName:null,orderFields:{nome:"nome"},actions:[],viewType:null,metadata:{order:{direction:"ASC",field:"nome"}},pagination:{per_page:2},fieldsConfig:{nome:{type:"w-input"}},value:[{id:1,nome:"aa",cognome:"aa"},{id:2,nome:"bb",cognome:"bb"},{id:3,nome:"dd",cognome:"dd"},{id:4,nome:"ff",cognome:"ff"},{id:5,nome:"mm",cognome:"mm"},{id:6,nome:"nn",cognome:"nn"}]}},staticRecord(){return{type:"v-record",langContext:null,routeName:null,fields:["name","relazione","mycheck"],value:{mycheck:["1"],relazione:"prova",name:"nome"},fieldsConfig:{mycheck:{type:"w-checkbox",domainValues:{0:"bo",1:"uno",2:"due",3:"tre"}}}}},userList(){return{modelName:"user",type:"v-list",actions:["action-view"],actionsConfig:{"action-view":{execute(){let e=this;this.componentDialog("v-view",{modelName:"user",type:"v-view",pk:e.modelData.id,fieldsConfig:{mainrole:{type:"w-belongsto",labelFields:["name"]}}})}}},orderFields:{email:"email",name:"name"},fieldsConfig:{email:{label:"emailina",type:"w-text",template:{name:"tpl-list",columnClass:"col-12"}}}}},userListPanel(){let e=this.userList();return e.recordActionsPosition="start",e.actions.push("show-panel"),e.actionsConfig["show-panel"]={text:"sp",type:"record",toggle:!1,execute(i){let o=this;console.log("event",i),this.toggle?this.view.hidePanel():this.view.showPanel(i,{componentName:"c-view",panelClass:"w-7",componentConf:{type:"v-edit",pk:o.modelData.id,modelName:"user",actions:["action-save"]},hide(){console.log("HIIIIII",o.toggle),o.toggle=!1}}),this.toggle=!this.toggle}},e},userView(){return{type:"v-view",modelName:"user",pk:3,fields:["id","email"],layout:{labelPosition:"bottom"}}},userEdit(){return{pk:4,type:"v-edit",fields:["name","email","mainrole"],actions:["action-save","action-back","action-custom"],modelName:"user",mounted(){var e=this;e.waitWidget("email",function(){console.log("wait ok",e.getWidget("email").getValue())})},fieldsConfig:{name:{type:"w-input",rules:"required",required:!0},email:{type:"w-texthtml",template:{name:"tpl-record",labelType:"none"}},pippo:{type:"w-custom",template:"tpl-divider",mounted(){this.value="ciao"}},fotos:{type:"w-hasmany",hasmanyConf:{fields:["nome","descrizione","resource"],fieldsConfig:{resource:{type:"w-upload-ajax",extensions:["jpg","png"],maxFileSize:"2M",ajaxFields:{field:"resource"},modelName:"user"}}},value:[],limit:3},attachments:{type:"w-hasmany",hasmanyConf:{fields:["nome","descrizione","resource"],fieldsConfig:{resource:{type:"w-upload-ajax",extensions:["xls","csv"],maxFileSize:"2M",ajaxFields:{resource_type:"attachment",field:"resource"},modelName:"user"}}},value:[],limit:3},mainrole1:{type:"w-multi-select",value:[1,2],domainValues:{0:"Niente",1:"boh",2:"Due"}},mainrole:{type:"w-select",mounted(){let e=this;setTimeout(function(){console.log("aaa",e.domainValues,e.domainValuesOrder,e.value)},3e3)}},attivo:"w-radio",password:{type:"w-input",inputType:"password"},password_confirmation:{type:"w-input",inputType:"password"}},actionsConfig:{"action-custom":{text:"Custom",execute(){let e=this,i=e.view.getAction("action-save").enabled;console.log("custom action",e.view.getAction("action-save")),e.view.getAction("action-save").setEnabled(!i)}}}}},userEditValidate(){return{pk:4,type:"v-edit",fields:["name","email","mainrole"],actions:["action-save","action-back","action-custom"],modelName:"user",mounted(){var e=this;e.waitWidget("email",function(){console.log("wait ok",e.getWidget("email").getValue())})},fieldsConfig:{name:{type:"w-input",rules:"required",required:!0},email:{type:"w-input",rules:"required",template:{name:"tpl-record",labelType:"none"}},pippo:{type:"w-custom",template:"tpl-divider",mounted(){this.value="ciao"}},fotos:{type:"w-hasmany",hasmanyConf:{fields:["nome","descrizione","resource"],fieldsConfig:{resource:{type:"w-upload-ajax",extensions:["jpg","png"],maxFileSize:"2M",ajaxFields:{field:"resource"},modelName:"user"}}},value:[],limit:3},attachments:{type:"w-hasmany",hasmanyConf:{fields:["nome","descrizione","resource"],fieldsConfig:{resource:{type:"w-upload-ajax",extensions:["xls","csv"],maxFileSize:"2M",ajaxFields:{resource_type:"attachment",field:"resource"},modelName:"user"}}},value:[],limit:3},mainrole1:{type:"w-multi-select",value:[1,2],rules:"required",domainValues:{0:"Niente",1:"boh",2:"Due"}},mainrole:{type:"w-select",mounted(){let e=this;setTimeout(function(){console.log("aaa",e.domainValues,e.domainValuesOrder,e.value)},3e3)}},attivo:"w-radio",password:{type:"w-input",inputType:"password"},password_confirmation:{type:"w-input",inputType:"password"}},actionsConfig:{"action-custom":{text:"Custom",execute(){let e=this,i=e.view.getAction("action-save").enabled;console.log("custom action",e.view.getAction("action-save")),e.view.getAction("action-save").setEnabled(!i)}}}}},userSearch(){return{modelName:"user",type:"v-search",layout:{cols:4},actionsConfig:{"action-search":{execute(){var e=this;window.FF=e.view.getViewData(),console.log("view data",e.view.getViewData())}}},fields:["user_id","email","stato","stato_check"],advancedFields:["cognome","nome"],fieldsConfig:{stato:{type:"w-multi-select",value:[1],domainValues:{1:"Stato1",2:"Stato2",3:"Stato3",4:"Stato4"},methods:{change(){console.log("Value",this.getValue())}}},stato_check:{type:"w-checkbox",value:[1],domainValues:{1:"Stato1",2:"Stato2",3:"Stato3",4:"Stato4"}}}}},listEdit(){return{modelName:"user",fields:["name","email"],type:"v-list-edit",fieldsConfig:{email:{label:"aaaa"}},fieldsEditConfig:{email:{type:"w-text"}}}},userListHideColumn(){return{modelName:"user",type:"v-list",actions:["action-hide-column","action-show-column"],actionsConfig:{"action-hide-column":{text:"Hide Column",execute(){let e=prompt("inserire nome campo da rimuovere. campi disponibili ( "+this.view.fields.join(",")+")");this.view.hideColumn(e)}},"action-show-column":{text:"Show Column",execute(){let e=this,i=prompt("inserire nome campo da visualizzare. campi disponibili ( "+e.view.hiddenColumns.join(",")+")");e.view.showColumn(i)}}},orderFields:{email:"email",name:"name"},fieldsConfig:{email:{label:"emailina",type:"w-text",template:{name:"tpl-list",columnClass:"col-12"}}}}},userListActionSelect(){return{modelName:"user",type:"v-list",actions:["ActionSelect"],actionsConfig:{ActionSelect:{text:"mod inst",domainValues:{0:"Nessuna azione",1:"Pippo",2:"Pluto"},execute(){alert("value "+this.value)}}},orderFields:{},fieldsConfig:{}}}}},T={class:"grid"},F={class:"col-12"},j={class:"card"},z=t("h5",null,"Views",-1),A={class:"w-full"},L=["onClick"],D={class:"grid overflow-auto"},E={class:"col-12"},B={class:"w-full"},I={class:"grid"},P={class:"col-12"},q=t("hr",null,null,-1),H={class:"grid"},M={class:"col-6"},J=t("div",{class:"font-italic"},"Iniziare il codice sempre con var conf = ",-1),R=t("div",{id:"example",class:"h-20rem w-full"},null,-1),W={class:"col-6"},O=t("div",{id:"defaultCode",class:"h-20rem w-full"},null,-1),K={key:0,class:"grid mt-5"},G=t("h5",null,"codice",-1),Q=["innerHTML"];function U(e,i,o,d,s,m){const g=r("c-view"),y=r("Fieldset"),C=r("Button");return a(),n("div",T,[t("div",F,[t("div",j,[z,t("div",A,[(a(!0),n(h,null,f(s.viewsConf,(p,l)=>(a(),n("a",{key:l,class:"p-button m-1 p-2 p-button-outlined",href:"javascript:void(0)",onClick:X=>s.wSelected=l},u(l),9,L))),128))]),t("div",D,[t("div",E,[w(y,{class:"",legend:"Area View"},{default:x(()=>[t("div",B,[(a(!0),n(h,null,f(s.viewsConf,(p,l)=>(a(),n("div",{key:l,class:""},[s.wSelected==l&&!s.reload?(a(),b(g,{key:0,class:"w-full",conf:p},null,8,["conf"])):v("",!0)]))),128))])]),_:1})])]),t("div",I,[t("div",P,[w(C,{class:"p-button w-4 mt-1 p-button-success",label:"Run",onClick:m.updateCode},null,8,["onClick"]),q,t("div",H,[t("div",M,[t("h6",null,"Configurazione View "+u(s.wSelected),1),J,R]),t("div",W,[t("h6",null,"Configurazione di default "+u(s.viewType),1),O])]),s.wSelected?(a(),n("div",K,[G,t("pre",{innerHTML:m.getCodeJs()},null,8,Q)])):v("",!0)])])])])])}const $=_(N,[["render",U]]);export{$ as default};
