import{U as w}from"./Utility-37494689.js";import{s as v,$ as y,v as _,p as i,r as u,o as M,c as B,a as o,b as c,w as m,J,f as b,t as T}from"./index-e35bfe49.js";const j={class:"grid"},I={class:"col-12"},O={class:"card"},h={class:"flex flex-wrap p-2 align-items-center gap-3"},U=["onClick"],D={class:"flex gap-2"},K={__name:"ModelsConfiguration",setup(E){const p=new J,a=v(""),r=v([[],[]]),C=[{label:"New Manage",icon:"pi pi-file",command:()=>{g("Manage")}},{label:"New Import",icon:"pi pi-file",command:()=>{g("Import")}}];var d=null,t=null;y(()=>{t&&t.close(),t=null}),_(()=>{setTimeout(function(){p.loadVisLib(function(){console.debug("OK",document.getElementById("example")),d=ace.edit("example",{theme:"ace/theme/textmate",mode:"ace/mode/javascript"}),w.connectToServer().then(l=>{t=l,console.log("connection",t),t.onopen=function(e){console.log("event on open",e),console.log("Successfully")},t.onmessage=function(e){console.log("onmessage",e.data);let n=JSON.parse(e.data);switch(n.action){case"list-models":r.value[0]=n.result.enabled,r.value[1]=n.result.disabled;break;case"load-model":d.setValue(atob(n.result)),a.value=n.modelName;break;case"load-template-conf":d.setValue(atob(n.result)),a.value="";break;case"save-model":i.CrudCore.alertSuccess("model saved",3e3);break;case"stdout":i.CrudCore.alertInfo(n.data);break;case"stderr":i.CrudCore.alertError(n.data);break;case"error":i.CrudCore.errorDialog(JSON.stringify(n,"","	"));break}},k()})})},200)});function k(){let l={action:"list-models"};t.send(JSON.stringify(l))}function f(){if(!a.value){i.CrudCore.errorDialog("Inserire la variabile del modello");return}let l=d.getValue(),e={action:"save-model",filename:a.value,body:btoa(p.getCodeString(l))};t.send(JSON.stringify(e))}function x(l){console.debug("readModel",l);let e={action:"load-model",modelName:l};t.send(JSON.stringify(e))}function g(l){console.debug("tplName",l);let e={action:"load-template-conf",confName:l};t.send(JSON.stringify(e))}return(l,e)=>{const n=u("PickList"),N=u("InputText"),S=u("Button"),V=u("SplitButton");return M(),B("div",j,[o("div",I,[o("div",O,[e[5]||(e[5]=o("h5",null,"Lista modelli usati nell'applicazione",-1)),c(n,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=s=>r.value=s),listStyle:"height:342px",breakpoint:"1400px",showSourceControls:!1,showTargetControls:!1},{sourceheader:m(()=>e[2]||(e[2]=[b(" Enabled ")])),targetheader:m(()=>e[3]||(e[3]=[b(" Disabled ")])),item:m(s=>[o("div",h,[o("span",null,T(s.item),1),o("span",{class:"cursor-pointer",onClick:L=>x(s.item)},e[4]||(e[4]=[o("i",{class:"pi pi-file"},null,-1)]),8,U)])]),_:1},8,["modelValue"]),e[6]||(e[6]=o("hr",null,null,-1)),o("div",D,[c(N,{modelValue:a.value,"onUpdate:modelValue":e[1]||(e[1]=s=>a.value=s)},null,8,["modelValue"]),c(S,{label:"Save",onClick:f}),c(V,{label:"New",model:C,icon:"pi pi-plus",onClick:f})]),e[7]||(e[7]=o("hr",null,null,-1)),e[8]||(e[8]=o("div",{class:"grid"},[o("div",{class:"col-12"},[o("h6",null,"Configurazione Modello"),o("div",{class:"font-italic"},"Modifica la configurazione e salva"),o("div",{id:"example",class:"h-20rem w-full"}," export default { list : { type : 'v-list', modelName : 'user' } } ")])],-1))])])])}}};export{K as default};
