import{J as x}from"./JsToCode-a795b324.js";import{_ as T,B as k,r as u,o as i,c as s,a as t,F as h,m as C,b as f,q as v,w as S,t as m,z as V,p as b,f as D}from"./index-785c95e7.js";const c=new x,F={name:"TestWidgets",extends:k.CrudComponent,inject:["store"],data(){return window.TW=this,{wSelected:null,widgetsConf:{"w-hidden":this.wHiddenConf(),"w-text":this.wTextConf(),"w-input":this.wInputConf(),"w-select":this.wSelectConf(),"w-autocomplete":this.wAutocompleteConf(),"w-checkbox":this.wCheckboxConf(),"w-radio":this.wRadioConf(),"w-hasmany":this.wHasmany("record"),"w-hasmany-list":this.wHasmany("list"),"w-belongsto":this.wBelongstoConf(),"w-custom":this.wCustomConf(),"w-color-picker":this.wColorPickerConf(),"w-date-picker":this.wDatePickerConf(),"w-date-text":this.wDateTextConf(),"w-date-text2":this.wDateTextConf2(),"w-textarea":this.wTextareaConf(),"w-multi-select":this.wMultiSelectConf(),"w-swap":this.wSwapConf(),"w-status con icon":this.wStatusConf(),"w-status con testo":this.wStatusTextConf(),"w-texthtml":this.wTexthtmlConf(),"w-upload":this.wUploadConf(),"w-upload-ajax":this.wUploadAjaxConf(),"w-chip":this.wChipConf()},fIndex:0,dynamicCode:"",defaultCode:"",reload:!1,editor:null,editorDefault:null,widgetType:""}},mounted(){let e=this;setTimeout(function(){c.loadVisLib(function(){console.debug("OK",document.getElementById("example")),e.editor=ace.edit("example",{theme:"ace/theme/textmate",mode:"ace/mode/javascript",value:"var conf = {}"}),e.editorDefault=ace.edit("defaultCode",{theme:"ace/theme/textmate",mode:"ace/mode/javascript",value:"var conf = {}"})})},200)},watch:{wSelected(){let e=this,a=this.widgetsConf[this.wSelected];this.dynamicCode=c.getSourceCode(a),this.editor.setValue("var conf = "+this.dynamicCode),this.widgetType=e.widgetsConf[e.wSelected].type;let n=c.getWidgetDefaultConf(this.widgetType);e.defaultCode=c.getSourceCode(n),e.editorDefault.setValue("var conf = "+e.defaultCode)}},methods:{updateCode(){let e=this,a=e.editor.getValue(),n=c.updateCode(a);e.reload=!0,setTimeout(function(){try{e.widgetsConf[e.wSelected]=window[n](),e.reload=!1}catch(r){throw e.errorDialog(r),r}},20)},getWidget(e){return this.$refs[e][0].instance()},makeid(e){for(var a="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=n.length,o=0;o<e;o++)a+=n.charAt(Math.floor(Math.random()*r));return a},aggiornaText(){this.widgetsConf["w-text"].value=this.makeid(10)},wChipConf(){return{type:"w-chip",name:"field1",value:["testone"],change(){console.log("chip value",this.getValue())}}},wHiddenConf(){return{type:"w-hidden",name:"field1",value:"testone"}},wTextConf(){return{type:"w-text",name:"field1",value:"testone"}},wInputConf(){return{inputType:"text",value:"220",change(e){let a=this;console.log("value",a.getValue(),"that",a)}}},wSelectConf(){return{value:20,name:"field1",type:"w-select",domainValues:{10:"Dieci",20:"Venti",30:"Trenta"},change(){console.log("value",this.value)}}},wAutocompleteConf(){return{type:"w-autocomplete",name:"email",labelFields:["email"],value:2,foormName:"user",viewType:"edit",referredData:{id:2,email:"ciullo@gmail.com",name:"Pier Paolo Ciullo"},clearButton:!0,extraBind:{"option-label":"name"}}},wCheckboxConf(){return{type:"w-checkbox",value:["1","4"],domainValues:{1:"Uno",2:"Due",3:"Tre",4:"Quattro",5:"Cinque"},change(){console.log(this.value)}}},wRadioConf(){return{type:"w-radio",value:"1",name:"field1",domainValues:{0:"Zero",1:"Uno",2:"Due",3:"Tre"},domainValuesOrder:[3,2,1,0],change(){console.log("change ",this.getValue())}}},wHasmany(e){let a={name:"field1",label:"Hasmany",type:"w-hasmany",hasmanyType:e,hasmanyConf:{fields:["id","nome","descrizione","resource"],defaultWidgetType:"w-input",fieldsConfig:{id:{type:"w-hidden"},nome:{type:"w-input"},resource:{type:"w-input"}}},value:[{id:35,nome:"nome uno",descrizione:"descrizione presente",resource:"de ma de"}],limit:3,change(){console.log("change ",this.getValue())}};return e=="list"&&(a.hasmanyConf.actions=["action-insert","action-delete-selected"]),a},wBelongstoConf(){return{name:"user",type:"w-belongsto",cRef:"wTest",separator:"--",labelFields:["email"],value:{id:3,email:"amministratore@amministratore.it"}}},wCustomConf(){return{type:"w-custom",value:"ciao <b>tutti</b>"}},wColorPickerConf(){return{type:"w-color-picker",value:"#FF00FF"}},wDatePickerConf(){return{value:"2020-12-20",buttonClear:!0,type:"w-date-picker",change(){console.log("date-picker",this.value)}}},wDateTextConf(){return{type:"w-date-text",value:"2021-12-09",displayFormat:"LLL"}},wDateTextConf2(){return{type:"w-date-text",value:"2021-12-18",displayFormat:"giorno DD anno YYYY mese MM"}},wTextareaConf(){return{type:"w-textarea",value:"text area prvoa",change(){console.log("textarea value ",this.getValue())}}},wMultiSelectConf(){return{value:[20,30],name:"field1",type:"w-multi-select",domainValues:{10:"Dieci",20:"Venti",30:"Trenta",40:"Quaranta"},change(){console.log("change ",this.getValue())}}},wSwapConf(){return{type:"w-swap",value:0,name:"banned",onIcon:"fa fa-circle",modelData:{id:4},modelName:"user",routeName:"set",change(){console.log("change ",this.getValue())}}},wStatusConf(){return{value:7,statusType:"icon",type:"w-status",domainValues:{5:"fa fa-times text-red-600",6:"fa fa-gear text-green-600",7:"fa fa-question text-yellow-600"}}},wStatusTextConf(){return{value:5,statusType:"text",type:"w-status",domainValues:{5:"Ciao bello",6:"Prova",7:"Sette"}}},wTexthtmlConf(){return{value:"text area prvoa",type:"w-texthtml",change(){console.log("change",this.getValue())}}},wUploadConf(){return{name:"field1",type:"w-upload",maxFileSize:"2M",extensions:["pdf","xls","png"],modelName:"user",value:{id:"files/allegati/allegato_1_1643619308.pdf",url:"downloadmediable/attachment/1",mimetype:"application/pdf"},ajaxFields:{resource_type:"attachment",field:"name"},methods:{change:function(){console.log("my change",this.getValue())}}}},wUploadAjaxConf(){return{name:"field1",type:"w-upload-ajax",maxFileSize:"2M",extensions:["pdf","xls","png"],modelName:"user",value:{id:"files/allegati/allegato_1_1643619308.pdf",url:"downloadmediable/attachment/1",mimetype:"application/pdf"},ajaxFields:{resource_type:"attachment",field:"name"},methods:{change:function(){console.log("my change",this.getValue())}}}},addHasmany(){let e=this;e.$refs[e.wSelected][0];let a=1+parseInt(Math.floor(Math.random()*10))%2;console.log("nitem",a),e.$refs[e.wSelected][0].setValue([{id:3,nome:e.makeid(7),descrizione:e.makeid(23),resource:e.makeid(10)}])}}},d=e=>(b("data-v-61840d6f"),e=e(),D(),e),B={class:"grid"},j={class:"col-12"},I={class:"card"},z=d(()=>t("h5",null,"Widgets",-1)),M=["onClick"],W=d(()=>t("hr",null,null,-1)),H={key:0},P=d(()=>t("hr",null,null,-1)),A={class:"grid"},L={class:"col-6"},U=d(()=>t("div",{class:"font-italic"},"Iniziare il codice sempre con var conf = ",-1)),N=d(()=>t("div",{id:"example",class:"h-20rem w-full"},null,-1)),R={class:"col-6"},Y=d(()=>t("div",{id:"defaultCode",class:"h-20rem w-full"},null,-1));function q(e,a,n,r,o,w){const p=u("Button"),y=u("c-widget"),_=u("Fieldset");return i(),s("div",B,[t("div",j,[t("div",I,[z,t("div",null,[(i(!0),s(h,null,C(o.widgetsConf,(g,l)=>(i(),s("a",{key:l,class:"p-button m-1 p-1 p-button-outlined",href:"javascript:void(0)",onClick:O=>o.wSelected=l},m(l),9,M))),128))]),W,t("div",null,[t("div",null,[["w-hasmany","w-hasmany-list"].indexOf(o.wSelected)>=0?(i(),s("div",H,[f(p,{icon:"fa fa-plus",onClick:w.addHasmany,label:"setValue dall'esterno"},null,8,["onClick"])])):v("",!0),f(_,{legend:"Area Widget"},{default:S(()=>[(i(!0),s(h,null,C(o.widgetsConf,(g,l)=>(i(),s(h,{key:l},[o.wSelected==l&&!o.reload?(i(),V(y,{key:0,class:"w-full",ref_for:!0,ref:l,conf:g},null,8,["conf"])):v("",!0)],64))),128))]),_:1}),f(p,{class:"p-button w-4 mt-1",label:"Run",onClick:w.updateCode},null,8,["onClick"]),P,t("div",A,[t("div",L,[t("h6",null,"Configurazione Widget "+m(o.widgetType),1),U,N]),t("div",R,[t("h6",null,"Configurazione di default "+m(o.widgetType),1),Y])])])])])])])}const Q=T(F,[["render",q],["__scopeId","data-v-61840d6f"]]);export{Q as default};
